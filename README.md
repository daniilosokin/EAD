# Разработка корпоративных приложений

## Задание

### Цель
Реализация проекта сервисно-ориентированного приложения.

### Задачи
* Реализация объектно-ориентированной модели данных,
* Изучение реализации серверных приложений на базе WebAPI/OpenAPI,
* Изучение работы с брокерами сообщений,
* Изучение паттернов проектирования,
* Изучение работы со средствами оркестрации на примере .NET Aspire,
* Повторение основ работы с системами контроля версий,
* Unit-тестирование.

### Лабораторные работы
<details>
<summary>1.	«Классы» - Реализация объектной модели данных и unit-тестов</summary>
<br> 
В рамках первой лабораторной работы необходимо подготовить структуру классов, описывающих предметную область, определяемую в задании. В каждом из заданий присутствует часть, связанная с обработкой данных, представленная в разделе «Unit-тесты». Данную часть необходимо реализовать в виде unit-тестов: подготовить тестовые данные, выполнить запрос с использованием LINQ, проверить результаты.  

Хранение данных на этом этапе допускается осуществлять в памяти в виде коллекций.  
Необходимо включить **как минимум 10** экземпляров каждого класса в датасид. 
  
</details>
<details>
<summary>2.	«Сервер» - Реализация серверного приложения с использованием REST API</summary>
<br> 
Во второй лабораторной работе необходимо реализовать серверное приложение, которое должно:
- Осуществлять базовые CRUD-операции с реализованными в первой лабораторной сущностями
- Предоставлять результаты аналитических запросов (раздел «Unit-тесты» задания)

Хранение данных на этом этапе допускается осуществлять в памяти в виде коллекций.
<br> 
</details>
<details>
<summary>3.	«ORM» - Реализация объектно-реляционной модели. Подключение к базе данных и настройка оркестрации</summary>
<br> 
В третьей лабораторной работе хранение должно быть переделано c инмемори коллекций на базу данных.  
Должны быть созданы миграции для создания таблиц в бд и их первоначального заполнения.
<br> 
Также необходимо настроить оркестратор Aspire на запуск сервера и базы данных.
<br> 
</details>
<details>
<summary>4.	«Инфраструктура» - Реализация сервиса генерации данных и его интеграция с сервером</summary>
<br>  
В четвертой лабораторной работе необходимо имплементировать сервис, который генерировал бы контракты. Контракты далее передаются в сервер и сохраняются в бд.
Сервис должен представлять из себя отдельное приложение без референсов к серверным проектам за исключением библиотеки с контрактами.
Отправка контрактов при помощи gRPC должна выполняться в потоковом виде.
При использовании брокеров сообщений, необходимо предусмотреть ретраи при подключении к брокеру.

Также необходимо добавить в конфигурацию Aspire запуск генератора и (если того требует вариант) брокера сообщений.
<br> 
</details>
<details>
<summary>5.	«Клиент» - Интеграция клиентского приложения с оркестратором</summary>
<br> 
В пятой лабораторной необходимо добавить в конфигурацию Aspire запуск клиентского приложения для написанного ранее сервера. Клиент создается в рамках курса "Веб-разработка".
<br> 
</details>

## Задание. Общая часть
**Обязательно**:
* Реализация серверной части на [.NET 8](https://learn.microsoft.com/ru-ru/dotnet/core/whats-new/dotnet-8/overview).
* Реализация серверной части на [ASP.NET](https://dotnet.microsoft.com/ru-ru/apps/aspnet).
* Реализация unit-тестов с использованием [xUnit](https://xunit.net/?tabs=cs).
* Использование хранения данных в базе данных согласно варианту задания.
* Оркестрация проектов при помощи [.NET Aspire](https://learn.microsoft.com/ru-ru/dotnet/aspire/get-started/aspire-overview)
* Реализация сервиса генерации данных при помощи [Bogus](https://github.com/bchavez/Bogus) и его взаимодейсвие с сервером согласно варианту задания.
* Автоматизация тестирования на уровне репозитория через [GitHub Actions](https://docs.github.com/en/actions/learn-github-actions/understanding-github-actions).
* Создание минимальной документации к проекту: страница на GitHub с информацией о задании, скриншоты приложения и прочая информация.

**Факультативно**:
* Реализация авторизации/аутентификации.
* Реализация atomic batch publishing/atomic batch consumption для брокеров, поддерживающих такой функционал. 
* Реализация интеграционных тестов при помощи .NET Aspire.
* Реализация клиента на Blazor WASM.

## Вариант задания

| № Варианта | Предметная область | База данных | Шина     |
| ---------- | ------------------ | ----------- | -------- |
| ...        | ...                | ...         | ...      |
| 73         | Авиакомпания       | MongoDb     | RabbitMq |
| ...        | ...                | ...         | ...      |


**«Авиакомпания»**

В базе данных авиакомпании хранятся сведения о авиарейсах, пассажирах и билетах.
Авиарейс характеризуется шифром, пунктом отправления, пунктом прибытия, датой
отправления, датой прибытия, временем отправления, временем в пути, моделью
самолета.

Модель самолета является справочником и содержит сведения о названии модели,
семействе модели, дальности полета, пассажировместимости и грузовместимости.
Семейство самолетов является справочником и содержит название семейства и
название производителя.

Пассажир характеризуется номером паспорта, ФИО, датой рождения.
Билет содержит информацию о рейсе и пассажире, а также о номере сидения, о
наличии ручной клади и суммарном весе багажа.

*Используется в качестве контракта.*

Unit-тесты:
- Вывести топ 5 авиарейсов по количеству перевезенных пассажиров.
- Вывести список рейсов с минимальным временем в пути.
- Вывести сведения обо всех пассажирах, летящих выбранным рейсом, вес багажа которых равен нулю, упорядочить по ФИО.
- Вывести сводную информацию обо всех полетах самолетов выбранной модели в указанный период времени.
- Вывести сведения о всех авиарейсах, вылетевших из указанного пункта отправления в указанный пункт прибытия.
